# ๐ฌ Abdal SpotPlayer PHP

**ุฒุจุงู**: [English](README.md) | [ูุงุฑุณ](README.fa.md)

[![License](https://img.shields.io/badge/license-GPL--2.0--or--later-blue.svg)](LICENSE)
[![PHP Version](https://img.shields.io/badge/php-%3E%3D7.0-blue.svg)](https://php.net)
[![Packagist](https://img.shields.io/packagist/v/abdal/spotplayer-php.svg)](https://packagist.org/packages/abdal/spotplayer-php)

<div dir="rtl">



ฺฉ ฺฉูุงูุช ุญุฑููโุง PHP ุจุฑุง ุณุฑูุณ **SpotPlayer** ฺฉู ฺฉ ูพุฎุดโฺฉููุฏู ุฑุณุงูู ุงูู ุจุง ูพุดุชุจุงู ุงุฒ ูุฏุฑุช ุญููู ุฏุฌุชุงู (DRM) ุงุณุช. ุงู ูพฺฉุฌ ุฑุงุจุท ุณุงุฏู ู ฺฉุงุฑุจุฑุฏ ุจุฑุง ูุฏุฑุช ูุงุณูุณโูุงุ ุงุฌุงุฏ ูุงุณูุณโูุง ุชุณุช ู ูุฑุงุด ูุงุณูุณโูุง ููุฌูุฏ ุงุฒ ุทุฑู API ุงุณูพุงุช ูพูุฑ ูุฑุงูู ูโฺฉูุฏ.

## ๐ฏ ฺุฑุง ุงู ูุฑูโุงูุฒุงุฑ ุณุงุฎุชู ุดุฏ

SpotPlayer ฺฉ ูพุฎุดโฺฉููุฏู ุฑุณุงูู ุงูู ุชุฎุตุต ุงุณุช ฺฉู ุชูุฑฺฉุฒ ุงุตู ุขู ุฑู **ูุฏุฑุช ุญููู ุฏุฌุชุงู (DRM)** ู ุฌููฺฏุฑ ุงุฒ **ุณุฑูุช ูุญุชูุง** ู **ุฏุณุชุฑุณ ุบุฑูุฌุงุฒ** ูโุจุงุดุฏ. ุงู ูพฺฉุฌ PHP ุจุฑุง ุณุงุฏูโุณุงุฒ ฺฉูพุงุฑฺูโุณุงุฒ API ุงุณูพุงุช ูพูุฑ ุฏุฑ ุจุฑูุงููโูุง PHP ุงุฌุงุฏ ุดุฏู ุงุณุช ู ุจู ุชูุณุนูโุฏููุฏฺฏุงู ุงูฺฉุงู ูโุฏูุฏ ุชุง:

- **ูุฏุฑุช ุขุณุงู ูุงุณูุณโูุง** ุจู ุตูุฑุช ุจุฑูุงููโููุณ ุจุฏูู ูุงุฒ ุจู ุนููุงุช ุฏุณุช ุฏุฑ ุฏุงุดุจูุฑุฏ
- **ุฎูุฏฺฉุงุฑุณุงุฒ ุงุฌุงุฏ ูุงุณูุณ** ุจุฑุง ูพูุชูุฑูโูุง ุชุฌุงุฑุช ุงูฺฉุชุฑููฺฉ ู ุฏูุฑูโูุง ุขููุฒุด
- **ฺฉูพุงุฑฺูโุณุงุฒ ูุญุงูุธุช DRM** ุฏุฑ ุจุฑูุงููโูุง PHP ููุฌูุฏ
- **ูพุดุชุจุงู ุงุฒ ูุฑ ุฏู ุงูฺฏู OOP ู ูุชุฏ ุงุณุชุงุชฺฉ** ุจุฑุง ุงูุนุทุงูโูพุฐุฑ ุจุดุชุฑ

ฺู ุฏุฑ ุญุงู ุณุงุฎุช ฺฉ ูพูุชูุฑู ุขููุฒุด ุงูฺฉุชุฑููฺฉ ุจุงุดุฏุ ุณุฑูุณ ุงุณุชุฑู ูุฏู ุง ูุฑ ุจุฑูุงููโุง ฺฉู ูุงุฒ ุจู ูุญุชูุง ุฑุณุงููโุง ูุญุงูุธุช ุดุฏู ุฏุงุฑุฏุ ุงู ูพฺฉุฌ ุฑุงูโุญู ูู ู ููุงุณุจ ุจุฑุง ุชูุณุนูโุฏููุฏฺฏุงู ุงุฑุงุฆู ูโุฏูุฏ ฺฉู ุจู ฺฉุงุฑุจุฑุงู ฺฉูฺฉ ูโฺฉูุฏ ูุดฺฉู ูุฏุฑุช ูุงุณูุณโูุง ูุญุชูุง ุฏุฌุชุงู ูุญุงูุธุช ุดุฏู ุฑุง ุจู ุทูุฑ ูุคุซุฑ ุญู ฺฉููุฏ.

## โจ ูฺฺฏโูุง ู ูุงุจูุชโูุง

- โ **ุงูฺฏููุง ุงุณุชูุงุฏู ุฏูฺฏุงูู**: ูพุดุชุจุงู ุงุฒ ูุฑ ุฏู ุฑูุด ูุฑุงุฎูุงู ูุจุชู ุจุฑ ููููู OOP ู ูุชุฏ ุงุณุชุงุชฺฉ
- โ **ุณุงุฒฺฏุงุฑ ุจุง PHP 7+**: ฺฉุงุฑ ุจุง PHP 7.0 ู ูุณุฎูโูุง ุจุงูุงุชุฑ
- โ **ฺฉูพุงุฑฺูโุณุงุฒ GuzzleHttp**: ฺฉูุงูุช HTTP ุญุฑููโุง ุจุฑุง ุงุฑุชุจุงุท ูุงุจู ุงุนุชูุงุฏ ุจุง API
- โ **ูุฏุฑุช ูุงุณูุณ**: ุงุฌุงุฏุ ูุฑุงุด ู ูุฏุฑุช ูุงุณูุณโูุง ุงุณูพุงุช ูพูุฑ
- โ **ูพุดุชุจุงู ุงุฒ ูุงุณูุณ ุชุณุช**: ุงุฌุงุฏ ุขุณุงู ูุงุณูุณโูุง ุชุณุช ุจุฑุง ุชูุณุนู
- โ **ุงุนุชุจุงุฑุณูุฌ ุฌุงูุน**: ุงุนุชุจุงุฑุณูุฌ ุฏุงุฎู ุจุฑุง ููุฏูุง ุงูุฒุงู
- โ **ูุฏุฑุช ุฎุทุง**: ูพุงูโูุง ุฎุทุง ุฏูู ู ูุฏุฑุช ุงุณุชุซูุง
- โ **ุงููุช ููุน**: ุฑุงูููุง ููุน ู ูุณุชูุฏุงุช ููุงุณุจ
- โ **ุจุงุฑฺฏุฐุงุฑ ุฎูุฏฺฉุงุฑ PSR-4**: ูพุดุชุจุงู ุงุฒ ุจุงุฑฺฏุฐุงุฑ ุฎูุฏฺฉุงุฑ ุงุณุชุงูุฏุงุฑุฏ Composer
- โ **ูพูุดุด ฺฉุงูู API**: ูพุดุชุจุงู ฺฉุงูู ุงุฒ ุชูุงู ูฺฺฏโูุง ูุงุณูุณ ุงุณูพุงุช ูพูุฑ ุดุงูู ูุงุชุฑูุงุฑฺฉุ ูุญุฏูุฏุช ุฏุณุชฺฏุงู ู ฺฉูุชุฑู ุฏุณุชุฑุณ

## ๐ฆ ูุงุฒููุฏโูุง

- PHP >= 7.0
- Composer
- GuzzleHttp (ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุงุฒ ุทุฑู Composer ูุตุจ ูโุดูุฏ)
- ฺฉูุฏ API ุงุณูพุงุช ูพูุฑ (ุงุฒ ุฏุงุดุจูุฑุฏ ุงุณูพุงุช ูพูุฑ ุฎูุฏ ุฏุฑุงูุช ฺฉูุฏ)


</div>


## ๐ ูุตุจ

ูพฺฉุฌ ุฑุง ุงุฒ ุทุฑู Composer ูุตุจ ฺฉูุฏ:

```bash
composer require abdal/spotplayer-php
```

ุง ุขู ุฑุง ุจู `composer.json` ุฎูุฏ ุงุถุงูู ฺฉูุฏ:

```json
{
    "require": {
        "abdal/spotplayer-php": "^1.0.0"
    }
}
```

ุณูพุณ ุงุฌุฑุง ฺฉูุฏ:

```bash
composer install
```

## ๐ ูุญูู ุงุณุชูุงุฏู ุงุฒ ูุฑูโุงูุฒุงุฑ

### ุฑูุด 1: ุงุณุชูุงุฏู ุงุฒ ููููู OOP

```php
<?php

require_once 'vendor/autoload.php';

use Abdal\SpotPlayer\SpotPlayer;

// ููุฏุงุฑุฏู ุงููู ุจุง ฺฉูุฏ API ุดูุง
$spotPlayer = new SpotPlayer('YOUR_API_KEY_HERE');

// ุงุฌุงุฏ ฺฉ ูุงุณูุณ ุณุงุฏู
$licenseData = [
    'course' => ['5d2ee35bcddc092a304ae5eb'],
    'name' => 'customer-name',
    'watermark' => [
        'texts' => [
            ['text' => '09022223301']
        ]
    ]
];

$result = $spotPlayer->createLicense($licenseData);

echo "License ID: " . $result['_id'] . "\n";
echo "License Key: " . $result['key'] . "\n";
echo "License URL: " . $result['url'] . "\n";
```

### ุฑูุด 2: ุงุณุชูุงุฏู ุงุฒ ูุชุฏูุง ุงุณุชุงุชฺฉ

```php
<?php

require_once 'vendor/autoload.php';

use Abdal\SpotPlayer\SpotPlayer;

// ุชูุธู ฺฉูุฏ API ฺฉ ุจุงุฑ
SpotPlayer::setStaticApiKey('YOUR_API_KEY_HERE');

// ุงุณุชูุงุฏู ุงุฒ ูุชุฏูุง ุงุณุชุงุชฺฉ
$licenseData = [
    'course' => ['5d2ee35bcddc092a304ae5eb'],
    'name' => 'customer-name',
    'watermark' => [
        'texts' => [
            ['text' => '09022223301']
        ]
    ]
];

$result = SpotPlayer::createLicense($licenseData);
```

### ุงุฌุงุฏ ูุงุณูุณ ุชุณุช

```php
$testLicenseData = [
    'test' => true,
    'course' => ['5d2ee35bcddc092a304ae5eb'],
    'name' => 'test-customer',
    'watermark' => [
        'texts' => [
            ['text' => '09022223301']
        ]
    ]
];

$result = $spotPlayer->createLicense($testLicenseData);
```

### ุงุฌุงุฏ ูุงุณูุณ ุจุง ูฺฺฏโูุง ฺฉุงูู

```php
$fullLicenseData = [
    'test' => false,
    'course' => ['5d2ee35bcddc092a304ae5eb', '5d2ee35bcddc092a304ae5ec'],
    'offline' => 30,
    'name' => 'premium-customer',
    'payload' => 'order-12345',
    'data' => [
        'confs' => 0,
        'limit' => [
            '5d2ee35bcddc092a304ae5eb' => '0-',
            '5d2ee35bcddc092a304ae5ec' => '1,4-6,10-'
        ]
    ],
    'watermark' => [
        'position' => 511,
        'reposition' => 15,
        'margin' => 40,
        'texts' => [
            [
                'text' => '09022223301',
                'repeat' => 10,
                'font' => 1,
                'weight' => 1,
                'color' => 2164260863,
                'size' => 50,
                'stroke' => ['color' => 2164260863, 'size' => 1]
            ]
        ]
    ],
    'device' => [
        'p0' => 1,  // ุชูุงู ุฏุณุชฺฏุงูโูุง
        'p1' => 1,  // ููุฏูุฒ
        'p2' => 0,  // MacOS
        'p3' => 0,  // Ubuntu
        'p4' => 0,  // Android
        'p5' => 0,  // iOS
        'p6' => 0   // WebApp
    ]
];

$result = $spotPlayer->createLicense($fullLicenseData);
```

### ูุฑุงุด ูุงุณูุณ ููุฌูุฏ

```php
$licenseId = '5dcab540796f5d4d48a6570f';

$editData = [
    'name' => 'updated-customer',
    'data' => [
        'limit' => [
            '5d2ee35bcddc092a304ae5eb' => '0-'
        ]
    ],
    'device' => [
        'p1' => 1  // ุจูโุฑูุฒุฑุณุงู ููุท ูุญุฏูุฏุช ุฏุณุชฺฏุงู ููุฏูุฒ
    ]
];

$result = $spotPlayer->editLicense($licenseId, $editData);
```

### ูุฏุฑุช ุฎุทุง

```php
try {
    $result = $spotPlayer->createLicense($licenseData);
} catch (\InvalidArgumentException $e) {
    // ุฎุทุงูุง ุงุนุชุจุงุฑุณูุฌ (ููุฏูุง ุงูุฒุงู ููููุฏุ ู ุบุฑู)
    echo "ุฎุทุง ุงุนุชุจุงุฑุณูุฌ: " . $e->getMessage();
} catch (\RuntimeException $e) {
    // ุฎุทุงูุง ุฏุฑุฎูุงุณุช API
    echo "ุฎุทุง API: " . $e->getMessage();
}
```

## ๐ง ูุชุฏูุง API

### `createLicense(array $licenseData, string|null $apiKey = null): array`

ฺฉ ูุงุณูุณ ุฌุฏุฏ ุฏุฑ ุงุณูพุงุช ูพูุฑ ุงุฌุงุฏ ูโฺฉูุฏ.

**ููุฏูุง ุงูุฒุงู:**
- `course` (array): ุขุฑุงู ุดูุงุณูโูุง ุฏูุฑู
- `name` (string): ูุงู ูุดุชุฑ
- `watermark.texts` (array): ุขุฑุงู ุงุดุงุก ูุชู ูุงุชุฑูุงุฑฺฉ
  - `watermark.texts[].text` (string): ูุชู ูุงุชุฑูุงุฑฺฉ (ุงูุฒุงู)

**ููุฏูุง ุงุฎุชุงุฑ:**
- `test` (bool): ุจุฑุง ูุงุณูุณโูุง ุชุณุช ุฑู `true` ุชูุธู ฺฉูุฏ
- `offline` (int): ุฑูุฒูุง ุฏุณุชุฑุณ ุขููุงู (0-365)
- `payload` (string): ุฏุงุฏูโูุง payload ุณูุงุฑุด
- `data` (array): ุฏุงุฏูโูุง ูุงุณูุณ ุดุงูู ูุญุฏูุฏุชโูุง ู ูพฺฉุฑุจูุฏโูุง
- `watermark` (array): ูพฺฉุฑุจูุฏ ฺฉุงูู ูุงุชุฑูุงุฑฺฉ
- `device` (array): ูุญุฏูุฏุชโูุง ุฏุณุชุฑุณ ุฏุณุชฺฏุงู

**ุจุงุฒฺฏุดุช:** ุขุฑุงู ุญุงู `_id`ุ `key` ู `url`

### `editLicense(string $licenseId, array $licenseData, string|null $apiKey = null): array`

ฺฉ ูุงุณูุณ ููุฌูุฏ ุฑุง ูุฑุงุด ูโฺฉูุฏ. ููุท ููุฏูุง ุงุฑุงุฆู ุดุฏู ุจูโุฑูุฒุฑุณุงู ูโุดููุฏ.

**ูพุงุฑุงูุชุฑูุง:**
- `$licenseId` (string): ุดูุงุณู ูุงุณูุณ ุจุฑุง ูุฑุงุด
- `$licenseData` (array): ููุฏูุง ุจุฑุง ุจูโุฑูุฒุฑุณุงู
- `$apiKey` (string|null): ฺฉูุฏ API ุงุฎุชุงุฑ

**ุจุงุฒฺฏุดุช:** ุฏุงุฏูโูุง ูุงุณูุณ ุจูโุฑูุฒุฑุณุงู ุดุฏู

## ๐ ฺฏุฒุงุฑุด ูุดฺฉูุงุช

ุงฺฏุฑ ุจุง ูุดฺฉู ููุงุฌู ุดุฏุฏ ุง ุฏุฑ ูพฺฉุฑุจูุฏ ูุดฺฉู ุฏุงุฑุฏุ ูุทูุงู ุงุฒ ุทุฑู ุงูู **Prof.Shafiei@Gmail.com** ุจุง ูุง ุฏุฑ ุชูุงุณ ุจุงุดุฏ. ููฺูู ูโุชูุงูุฏ ูุดฺฉูุงุช ุฑุง ุฏุฑ [GitLab](https://gitlab.com/ebrasha) ุง [GitHub](https://github.com/ebrasha/abdal-spotplayer-php) ฺฏุฒุงุฑุด ุฏูุฏ.

## โค๏ธ ุญูุงุช ูุงู

ุงฺฏุฑ ุงู ูพุฑูฺู ุจุฑุง ุดูุง ููุฏ ุจูุฏ ู ูุงู ุจู ุญูุงุช ุงุฒ ุชูุณุนู ุจุดุชุฑ ูุณุชุฏุ ูุทูุงู ุฏุฑ ูุธุฑ ุฏุงุดุชู ุจุงุดุฏ ฺฉู ฺฉูฺฉ ูุงู ฺฉูุฏ:
- [ุงูุฌุง ุงูุฏุง ฺฉูุฏ](https://alphajet.ir/abdal-donation)

## ๐คต ุจุฑูุงููโููุณ

ุณุงุฎุชู ุดุฏู ุจุง ุนุดู ุชูุณุท **ุงุจุฑุงูู ุดูุน (EbraSha)**

- **ุงูู**: [Prof.Shafiei@Gmail.com](mailto:Prof.Shafiei@Gmail.com)
- **GitHub**: [@ebrasha](https://github.com/ebrasha)
- **Twitter/X**: [@ProfShafiei](https://x.com/ProfShafiei)
- **LinkedIn**: [profshafiei](https://www.linkedin.com/in/profshafiei/)
- **ุชูฺฏุฑุงู**: [@ProfShafiei](https://t.me/ProfShafiei)

## ๐ ูุฌูุฒ

ุงู ูพุฑูฺู ุชุญุช ูุฌูุฒ **GPL-2.0-or-later** ููุชุดุฑ ุดุฏู ุงุณุช.

---

**ุชูุฌู**: ุงู ูพฺฉุฌ ฺฉ ฺฉูุงูุช ูุณุชูู PHP ุจุฑุง API ุงุณูพุงุช ูพูุฑ ุงุณุช ู ุจู ุทูุฑ ุฑุณู ูุงุจุณุชู ุจู ุงุณูพุงุช ูพูุฑ ูุณุช. ูุจู ุงุฒ ุงุณุชูุงุฏู ุงุฒ ุงู ูพฺฉุฌุ ูุทูุฆู ุดูุฏ ฺฉู ฺฉ ุญุณุงุจ ฺฉุงุฑุจุฑ ู ฺฉูุฏ API ูุนุชุจุฑ ุงุณูพุงุช ูพูุฑ ุฏุงุฑุฏ.

